<mxGraphModel dx="800" dy="1969" grid="1" guides="1" tooltips="1" connect="1" fold="1" page="1" pageScale="1" pageWidth="826" pageHeight="1169" style="default-style2"><root><mxCell id="0"/><mxCell id="1" parent="0"/><mxCell id="14" value="" style="shape=mxgraph.flowchart.process;fillColor=#ffffff;strokeColor=#000000;strokeWidth=2;rotation=0;align=left;whiteSpace=wrap" parent="1" vertex="1"><mxGeometry x="22.500000000001044" y="-220.27861983980247" width="1200.0000000000002" height="1510.2786198398023" as="geometry"/></mxCell><mxCell id="15" value="Validate and instrument / WebCLConsumer.cpp / &#xa;clang::ASTConsumer" style="shape=mxgraph.flowchart.process;fillColor=#ffffff;strokeColor=#000000;strokeWidth=2;rotation=0;fontStyle=1" parent="1" vertex="1"><mxGeometry x="104.99999999999972" y="-270.2786198398023" width="365.0000000000003" height="50" as="geometry"/></mxCell><mxCell id="16" value="WebCLRestrictor / WebCLVisitor.cpp / clang::RecursiveASTVisitor&#xa;&#xa;- Checks kernel arguments to be neither structs or image3d_t." style="shape=mxgraph.flowchart.process;fillColor=#ffffff;strokeColor=#000000;strokeWidth=2;rotation=0;verticalAlign=top;align=left;whiteSpace=wrap" parent="1" vertex="1"><mxGeometry x="42.49999999999993" y="-194.99999999999963" width="287.49999999999994" height="79.99999999999991" as="geometry"/></mxCell><mxCell id="24" value="WebCLPrinter / WebCLPrinter.cpp &#xa;&#xa;- Calls WebCLTransformer to write out all changes and to add necessary builtin wrapper and clamp macro implementations." style="shape=mxgraph.flowchart.process;fillColor=#ffffff;strokeColor=#000000;strokeWidth=2;rotation=0;verticalAlign=top;align=left;whiteSpace=wrap" parent="1" vertex="1"><mxGeometry x="69.99999999999996" y="1131.2499999999993" width="289.99999999999994" height="102.50000000000068" as="geometry"/></mxCell><mxCell id="50" value="Memory protection algorithm" style="swimlane;whiteSpace=wrap" parent="1" vertex="1"><mxGeometry x="394.9999999999998" y="-194.99999999999955" width="429.9999999999993" height="1464.9999999999995" as="geometry"><mxRectangle x="394.9999999999998" y="-194.99999999999955" width="424.9999999999995" height="60" as="alternateBounds"/></mxGeometry></mxCell><mxCell id="18" value="WebCLInputNormalizer / WebCLPass.cpp &#xa;&#xa;- Recognizes all typedefs and struct declarations and moves them to start of code to make sure that all types are declared before address space structures." style="shape=mxgraph.flowchart.process;fillColor=#ffffff;strokeColor=#000000;strokeWidth=2;rotation=0;verticalAlign=top;align=left;whiteSpace=wrap;fontStyle=0" parent="50" vertex="1"><mxGeometry x="56.000000000000256" y="54.721380160197484" width="340.0000000000002" height="85.27861983980252" as="geometry"/></mxCell><mxCell id="22" value="WebCLImageSafetyHandler / WebCLPass.cpp &#xa;&#xa;- Goes through all function calls and checks that their image2d_t arguments refer to function arguments.&#xa;" style="shape=mxgraph.flowchart.process;fillColor=#ffffff;strokeColor=#000000;strokeWidth=2;rotation=0;verticalAlign=top;align=left;whiteSpace=wrap" parent="50" vertex="1"><mxGeometry x="58.00000000000088" y="201.9999999999995" width="339.9999999999999" height="94.9999999999997" as="geometry"/></mxCell><mxCell id="19" value="WebCLAddressSpaceHandler / WebCLPass.cpp &#xa;&#xa;Constructs information about what kind of address spaces the program has and what variables are stored in local, global and private space. Provides API for kernel handler to request information if certain variable declaration is moved to address space struct.&#xa;&#xa;- Finds all the variables which has to be collected to address space structures and generates address space types according to them.&#xa;&#xa;- Add address space type declarations to prologue.&#xa;&#xa;- Add constant address space initialization to prologue.&#xa;&#xa;- Replaces uses of relocated variables to refer the ones in address space structure.&#xa;&#xa;&#xa;" style="shape=mxgraph.flowchart.process;fillColor=#ffffff;strokeColor=#000000;strokeWidth=2;rotation=0;verticalAlign=top;align=left;whiteSpace=wrap" parent="50" vertex="1"><mxGeometry x="58.00000000000049" y="359.9999999999992" width="339.99999999999994" height="270.0000000000008" as="geometry"/></mxCell><mxCell id="21" value="WebCLMemoryAccessHandler  / WebCLPass.cpp &#xa;&#xa;- Wraps all memory accesses to clamp pointer macros. &#xa;&#xa;- Adds actual memory address clamp macros to protect memory (asks possible limits for access from kernel handler).&#xa;&#xa;- Finds out which is the biggest required memory access to meet for each address space" style="shape=mxgraph.flowchart.process;fillColor=#ffffff;strokeColor=#000000;strokeWidth=2;rotation=0;verticalAlign=top;align=left;whiteSpace=wrap" parent="50" vertex="1"><mxGeometry x="55.00000000000038" y="1123" width="340.00000000000006" height="140" as="geometry"/></mxCell><mxCell id="20" value="WebCLKernelHandler / WebCLPass.cpp &#xa;&#xa;Knows everything about memory areas that program has and adds parts of instrumentation, which is related to initializing limits and providing API to request limits to check for different variable uses.&#xa;&#xa;-Goes though kernel arguments and adds additional data size argument after each passed pointer. &#xa;&#xa;-Collects information, what kind of global, local and constant memory areas were passed to kernel and create all the address space limit structures. &#xa;&#xa;-Fixes helper function signatures to contain additional parameter to expose valid limits and private address space structure in them.&#xa;&#xa;- Adds address space structure allocations and initialisations.&#xa;&#xa;- Adds code for setting address space null pointers.&#xa;&#xa;- Exports kernel signature information to start comment. &#xa;&#xa;" style="shape=mxgraph.flowchart.process;fillColor=#ffffff;strokeColor=#000000;strokeWidth=2;rotation=0;verticalAlign=top;align=left;whiteSpace=wrap" parent="50" vertex="1"><mxGeometry x="56.000000000000675" y="694.0410351201477" width="339.99999999999994" height="362.6393099199014" as="geometry"/></mxCell><mxCell id="52" value="" style="arrow" parent="50" source="18" target="22" edge="1"><mxGeometry width="100" height="100" relative="1" as="geometry"><mxPoint x="165.00000000000023" y="204.99999999999932" as="sourcePoint"/><mxPoint x="265.0000000000002" y="104.99999999999932" as="targetPoint"/></mxGeometry></mxCell><mxCell id="53" value="" style="arrow" parent="50" source="22" target="19" edge="1"><mxGeometry width="100" height="100" relative="1" as="geometry"><mxPoint x="214.60060743795384" y="289.9999999999996" as="sourcePoint"/><mxPoint x="214.60060743795384" y="344.99999999999915" as="targetPoint"/></mxGeometry></mxCell><mxCell id="54" value="" style="arrow" parent="50" source="19" target="20" edge="1"><mxGeometry width="100" height="100" relative="1" as="geometry"><mxPoint x="214.20121487590598" y="645.0410351201481" as="sourcePoint"/><mxPoint x="214.46680843727415" y="711.0410351201476" as="targetPoint"/></mxGeometry></mxCell><mxCell id="55" value="" style="arrow;" parent="50" source="20" target="21" edge="1"><mxGeometry width="100" height="100" relative="1" as="geometry"><mxPoint x="135.0000000000001" y="1014.9999999999995" as="sourcePoint"/><mxPoint x="135.2655935613683" y="1080.999999999999" as="targetPoint"/></mxGeometry></mxCell><mxCell id="64" value="" style="arrow" parent="50" source="21" target="23" edge="1"><mxGeometry width="100" height="100" relative="1" as="geometry"><mxPoint x="185.00000000000023" y="1334.9999999999995" as="sourcePoint"/><mxPoint x="285.0000000000002" y="1234.9999999999995" as="targetPoint"/></mxGeometry></mxCell><mxCell id="85" value="Please fix references to relocated variables to &#xa;point address space struct fields.&#xa;Please emit constant address space allocation&#xa;Get private address space info.&#xa;Get local address space info.&#xa;Get constant address space info." style="curved=1;align=left" parent="50" source="20" target="19" edge="1"><mxGeometry x="0.7396669603645027" y="88.56516073501636" width="100" height="100" relative="1" as="geometry"><mxPoint x="430.116619178772" y="875.1803450400489" as="sourcePoint"/><mxPoint x="429.11661917877177" y="494.8196549599497" as="targetPoint"/><Array as="points"><mxPoint x="525.0000000000002" y="604.9999999999995"/></Array><mxPoint as="offset"/></mxGeometry></mxCell><mxCell id="86" value="Get limits that hsould to be &#xa;checked for memory access" style="curved=1;" parent="50" source="21" target="20" edge="1"><mxGeometry x="-0.36021487288639314" y="-37.92822710331437" width="100" height="100" relative="1" as="geometry"><mxPoint x="385.0000000000002" y="1192.9999999999995" as="sourcePoint"/><mxPoint x="395.00000000000045" y="504.9999999999991" as="targetPoint"/><Array as="points"><mxPoint x="-124.99999999999977" y="1114.9999999999995"/></Array><mxPoint as="offset"/></mxGeometry></mxCell><mxCell id="87" value="Pass kernel handler &#xa;to provide limits for &#xa;builtin wrapper implementation" style="curved=1;" parent="50" source="23" target="20" edge="1"><mxGeometry x="-0.6659233057321019" y="52.38807020526694" width="100" height="100" relative="1" as="geometry"><mxPoint x="515.0000000000002" y="1364.9999999999995" as="sourcePoint"/><mxPoint x="396.0000000000007" y="962.3026535320869" as="targetPoint"/><Array as="points"><mxPoint x="545.0000000000002" y="1324.9999999999995"/></Array><mxPoint as="offset"/></mxGeometry></mxCell><mxCell id="109" value="" style="group" parent="50" vertex="1" connectable="0"><mxGeometry x="55.000000000000504" y="1329.9999999999993" width="339.9999999999993" height="94.99999999999932" as="geometry"/></mxCell><mxCell id="23" value="WebCLBuiltinHandler / WebCLPass.cpp &#xa;&#xa;Goes through all builtin function calls and replaces them with safe builtin call versions if necessary. " style="shape=mxgraph.flowchart.process;fillColor=#ffffff;strokeColor=#000000;strokeWidth=2;rotation=0;verticalAlign=top;align=left;whiteSpace=wrap" parent="109" vertex="1"><mxGeometry width="339.9999999999993" height="94.99999999999932" as="geometry"/></mxCell><mxCell id="58" value="Rewrite to file / &#xa;parse and built AST again" style="arrow;exitX=1;exitY=1;align=left;entryX=1;entryY=1" parent="1" source="72" target="83" edge="1"><mxGeometry x="-0.2242096838085061" y="-55.48530965416408" width="100" height="100" relative="1" as="geometry"><mxPoint x="340" y="-380" as="sourcePoint"/><mxPoint x="540" y="-390" as="targetPoint"/><mxPoint x="-1.140981859394435e-13" as="offset"/></mxGeometry></mxCell><mxCell id="35" value="" style="group;fontStyle=1;align=center" parent="1" vertex="1" connectable="0"><mxGeometry x="124.99999999999983" y="-780.0000000000006" width="470" height="150.00000000000023" as="geometry"/></mxCell><mxCell id="36" value="- Add name to all anonymos or unnamed structure declaratios.&#xa;&#xa;- Check identifier lengths.&#xa;&#xa;- Check that no identifiers are named, with those prefixes that validator uses in instrumentation." style="shape=mxgraph.flowchart.process;fillColor=#ffffff;strokeColor=#000000;strokeWidth=2;rotation=0;verticalAlign=top;whiteSpace=wrap;align=left" parent="35" vertex="1"><mxGeometry y="20.000000000000078" width="470" height="119.99999999999991" as="geometry"/></mxCell><mxCell id="37" value="Normalization pass 1 / WebCLAction.cpp / WebCLMatcher1Action" style="whiteSpace=wrap;fontStyle=1;align=center" parent="35" vertex="1"><mxGeometry x="4.99999999999973" y="-10" width="305.0000000000003" height="30" as="geometry"/></mxCell><mxCell id="33" value="" style="group;fontStyle=1;align=center" parent="1" vertex="1" connectable="0"><mxGeometry x="439.99999999999994" y="-1135" width="320.00000000000006" height="120.00000000000023" as="geometry"/></mxCell><mxCell id="3" value="  - Remove all user defined macros and defines. &#xa;&#xa;  - Check that enabled WebCL extensions are valid.&#xa;&#xa;  - Check that #include directive is not used anywhere." style="shape=mxgraph.flowchart.process;fillColor=#ffffff;strokeColor=#000000;strokeWidth=2;rotation=0;verticalAlign=top;whiteSpace=wrap;align=left" parent="33" vertex="1"><mxGeometry y="20.000000000000078" width="310" height="99.99999999999991" as="geometry"/></mxCell><mxCell id="29" value="Preprocess / WebCLPreprocessor.cpp" style="whiteSpace=wrap;fontStyle=1;align=center" parent="33" vertex="1"><mxGeometry x="3.9999999999991473" width="280" height="20" as="geometry"/></mxCell><mxCell id="61" value="" style="arrow;" parent="1" source="23" target="24" edge="1"><mxGeometry width="100" height="100" relative="1" as="geometry"><mxPoint x="320" y="1160" as="sourcePoint"/><mxPoint x="420" y="1060" as="targetPoint"/></mxGeometry></mxCell><mxCell id="62" value="Input to &#xa;Preprocessor" style="arrow;exitX=1;exitY=0.25;entryX=0;entryY=0.5;entryPerimeter=0" parent="1" edge="1"><mxGeometry x="-0.13353033637221176" y="24.283535263197763" width="100" height="100" relative="1" as="geometry"><mxPoint x="299.0000000000002" y="-1065.5" as="sourcePoint"/><mxPoint x="440" y="-1066" as="targetPoint"/><mxPoint as="offset"/></mxGeometry></mxCell><mxCell id="38" value="" style="group;fontStyle=1;align=center" parent="1" vertex="1" connectable="0"><mxGeometry x="30" y="-390" width="370" height="60" as="geometry"/></mxCell><mxCell id="73" value="" style="group" parent="38" vertex="1" connectable="0"><mxGeometry y="-20" width="370" height="95.00000000000017" as="geometry"/></mxCell><mxCell id="39" value="- Make all nested structure declarations to be flat.&#xa;&#xa;" style="shape=mxgraph.flowchart.process;fillColor=#ffffff;strokeColor=#000000;strokeWidth=2;rotation=0;verticalAlign=top;whiteSpace=wrap;align=left" parent="73" vertex="1"><mxGeometry x="-7.499999999998806" y="40.00000000000008" width="370" height="49.99999999999992" as="geometry"/></mxCell><mxCell id="40" value="Normalization pass 2 / WebCLAction.cpp / WebCLMatcher2Action" style="whiteSpace=wrap;fontStyle=1;align=center" parent="73" vertex="1"><mxGeometry x="5.999999999999957" width="244.00000000000006" height="40" as="geometry"/></mxCell><mxCell id="72" value="" style="rhombus;whiteSpace=wrap" parent="73" vertex="1"><mxGeometry x="38.0000000000003" y="84.00000000000007" width="10" height="10" as="geometry"/></mxCell><mxCell id="63" value="Rewrite all changes to file" style="arrow" parent="1" source="24" target="49" edge="1"><mxGeometry x="-0.15921274913457426" y="-1.4656215258716356" width="100" height="100" relative="1" as="geometry"><mxPoint x="190" y="1330" as="sourcePoint"/><mxPoint x="290" y="1230" as="targetPoint"/><mxPoint as="offset"/></mxGeometry></mxCell><mxCell id="67" value="" style="arrow;" parent="1" source="16" target="17" edge="1"><mxGeometry width="100" height="100" relative="1" as="geometry"><mxPoint x="200" y="-160" as="sourcePoint"/><mxPoint x="186.2499999999999" y="-80" as="targetPoint"/></mxGeometry></mxCell><mxCell id="68" value="" style="arrow;entryX=0;entryY=0.5;entryPerimeter=0" parent="1" source="17" target="18" edge="1"><mxGeometry width="100" height="100" relative="1" as="geometry"><mxPoint x="336.16038664479606" y="10" as="sourcePoint"/><mxPoint x="450" y="-87.63930991990082" as="targetPoint"/></mxGeometry></mxCell><mxCell id="17" value="WebCLAnalyser / WebCLVisitor.cpp / clang::RecursiveASTVisitor &#xa;&#xa;- Goes through AST tree and collects information about interesting constructs that other passes requires. e.g. lists of kernel functions, helper functions, internal function calls, builtin functions, pointer accesses, variable uses etc.&#xa;&#xa;- Does some simple checks for e.g. if unsupported builtin calls are found.&#xa;&#xa;- Provides API for other handler passes to request things they need to know about AST.&#xa;&#xa;&#xa;" style="shape=mxgraph.flowchart.process;fillColor=#ffffff;strokeColor=#000000;strokeWidth=2;rotation=0;verticalAlign=top;align=left;whiteSpace=wrap" parent="1" vertex="1"><mxGeometry x="37.499999999999886" y="-52.00000000000003" width="297.5000000000001" height="262" as="geometry"/></mxCell><mxCell id="76" value="" style="edgeStyle=none;endArrow=none;dashed=1;dashPattern=1 4" parent="1" target="75" edge="1"><mxGeometry width="100" height="100" relative="1" as="geometry"><mxPoint x="400" y="1190" as="sourcePoint"/><mxPoint x="480" y="1300" as="targetPoint"/></mxGeometry></mxCell><mxCell id="77" value="" style="edgeStyle=none;endArrow=none;dashed=1;dashPattern=1 4" parent="1" target="74" edge="1"><mxGeometry width="100" height="100" relative="1" as="geometry"><mxPoint x="630" y="1100" as="sourcePoint"/><mxPoint x="480.7017543859647" y="1330" as="targetPoint"/></mxGeometry></mxCell><mxCell id="78" value="" style="edgeStyle=none;endArrow=none;dashed=1;dashPattern=1 4;entryX=0;entryY=0.75" parent="1" target="48" edge="1"><mxGeometry width="100" height="100" relative="1" as="geometry"><mxPoint x="630" y="890" as="sourcePoint"/><mxPoint x="930" y="840" as="targetPoint"/></mxGeometry></mxCell><mxCell id="79" value="" style="edgeStyle=none;endArrow=none;dashed=1;dashPattern=1 4" parent="1" target="46" edge="1"><mxGeometry width="100" height="100" relative="1" as="geometry"><mxPoint x="630" y="459" as="sourcePoint"/><mxPoint x="930" y="450" as="targetPoint"/></mxGeometry></mxCell><mxCell id="80" value="Rewrite to file / &#xa;parse and built AST again" style="arrow;align=center" parent="1" source="36" target="40" edge="1"><mxGeometry x="-0.09806483883437747" y="-7.507591890595251" width="100" height="100" relative="1" as="geometry"><mxPoint x="187.91287878787892" y="-570.0000000000001" as="sourcePoint"/><mxPoint x="187.87499999999994" y="-447.49999999999943" as="targetPoint"/><mxPoint as="offset"/></mxGeometry></mxCell><mxCell id="82" value="Pass preprocessed source to&#xa;first normalization pass.&#xa;All userdefined macros are evaluated." style="arrow;align=center" parent="1" source="3" target="36" edge="1"><mxGeometry x="0.13529879980647258" y="0.4607145464793405" width="100" height="100" relative="1" as="geometry"><mxPoint x="335.741935483871" y="-630.0000000000005" as="sourcePoint"/><mxPoint x="204.41935483870986" y="-400" as="targetPoint"/><mxPoint x="2.5011104298755527e-12" y="1.8189894035458565e-12" as="offset"/></mxGeometry></mxCell><mxCell id="83" value="" style="rhombus;whiteSpace=wrap" parent="1" vertex="1"><mxGeometry x="68.00000000000021" y="-199.99999999999937" width="10" height="10" as="geometry"/></mxCell><mxCell id="65" value="" style="group" parent="1" vertex="1" connectable="0"><mxGeometry x="890" y="-160" width="300.75000000000045" height="320" as="geometry"/></mxCell><mxCell id="25" value="WebCLTransformer  / WebCLTransformer.cpp &#xa;&#xa;Provides convenient API to make various type of transformations to source code. Even that the provided transformations are specific to this memory protection algorithm, the instance should be as dummy as possible and not to do any implicit transformations, but just apply those which it is requested to do.&#xa;&#xa;Uses WebCLRewriter to apply changes to actual source.&#xa;" style="shape=mxgraph.flowchart.process;fillColor=#ffffff;strokeColor=#000000;strokeWidth=2;rotation=0;verticalAlign=top;align=left;whiteSpace=wrap" parent="65" vertex="1"><mxGeometry y="0.36069008009875675" width="300.75000000000034" height="339.6393099199012" as="geometry"/></mxCell><mxCell id="26" value="WebCLRewriter  / WebCLRewriter.cpp &#xa;&#xa;- Implements some support for nested rewrites, since Clang 3.2 was not able to handle them without breaking code locations." style="shape=mxgraph.flowchart.process;fillColor=#ffffff;strokeColor=#000000;strokeWidth=2;rotation=0;verticalAlign=top;whiteSpace=wrap;align=left" parent="65" vertex="1"><mxGeometry x="13.187500000000185" y="219.99999999999895" width="274.3749999999999" height="100.00000000000023" as="geometry"/></mxCell><mxCell id="95" value="Add size argument after each memory buffer passed to kernel&#xa;Create limits structure typedef for each address space&#xa;Add limits argument to helper signature&#xa;Add limits argument to helper call&#xa;Create local address space allocation to kernels&#xa;Create local address space null area allocation&#xa;Add program memory limits structure allocation to kernels&#xa;Add local area null initializations&#xa;Create kernel argument info start comment&#xa;" style="edgeStyle=orthogonalEdgeStyle;exitX=1;exitY=0.5;exitPerimeter=0;align=left" parent="1" source="20" target="25" edge="1"><mxGeometry x="-0.8692872684378552" y="-19.6393099199016" width="100" height="100" relative="1" as="geometry"><mxPoint y="100" as="sourcePoint"/><mxPoint x="100" as="targetPoint"/><mxPoint as="offset"/></mxGeometry></mxCell><mxCell id="96" value="Wrap memory address &#xa;of the access&#xa;to clamping macro" style="edgeStyle=orthogonalEdgeStyle;exitX=1;exitY=0.5;exitPerimeter=0;elbow=vertical" parent="1" source="21" target="25" edge="1"><mxGeometry x="-0.7379197379197382" y="-1.9999999999988645" width="100" height="100" relative="1" as="geometry"><mxPoint y="100" as="sourcePoint"/><mxPoint x="100" as="targetPoint"/><Array as="points"><mxPoint x="1040" y="998"/></Array><mxPoint y="5.777426857041853e-13" as="offset"/></mxGeometry></mxCell><mxCell id="97" value="Wrap builtin function to &#xa;safe version if neessary" style="edgeStyle=orthogonalEdgeStyle;exitX=1;exitY=0.5;exitPerimeter=0" parent="1" source="23" target="25" edge="1"><mxGeometry x="-0.8229488585385301" width="100" height="100" relative="1" as="geometry"><mxPoint y="100" as="sourcePoint"/><mxPoint x="100" as="targetPoint"/><mxPoint as="offset"/></mxGeometry></mxCell><mxCell id="98" value="Create private address space type&#xa;Create local address space type&#xa;Create constant address space type&#xa;Replace references to variables to &#xa;point address space struct fields&#xa;Create allocation for constant &#xa;address space structure&#xa;" style="edgeStyle=orthogonalEdgeStyle;exitX=1;exitY=0.5;exitPerimeter=0;entryX=0.5;entryY=1;entryPerimeter=0;align=left" parent="1" source="19" target="25" edge="1"><mxGeometry x="-0.7985709424974488" y="-20.00000000000076" width="100" height="100" relative="1" as="geometry"><mxPoint y="100" as="sourcePoint"/><mxPoint x="100" as="targetPoint"/><mxPoint y="-2.7861819333728074e-13" as="offset"/></mxGeometry></mxCell><mxCell id="99" value="Move type declarations&#xa; to module prolog" style="edgeStyle=orthogonalEdgeStyle;exitX=1;exitY=0.5;exitPerimeter=0;entryX=0.5;entryY=0;entryPerimeter=0" parent="1" edge="1"><mxGeometry x="0.025782803517637426" y="-30" width="100" height="100" relative="1" as="geometry"><mxPoint x="791.0000000000002" y="-97.63930991990082" as="sourcePoint"/><mxPoint x="1040.3750000000002" y="-159.63930991990128" as="targetPoint"/><Array as="points"><mxPoint x="860" y="-98"/><mxPoint x="860" y="-210"/><mxPoint x="1040" y="-210"/></Array><mxPoint as="offset"/></mxGeometry></mxCell><mxCell id="100" value="Get type &#xa;declarations" style="edgeStyle=orthogonalEdgeStyle;entryX=0.5;entryY=1;entryPerimeter=0" parent="1" source="18" target="17" edge="1"><mxGeometry x="-0.8834244080145722" width="100" height="100" relative="1" as="geometry"><mxPoint y="100" as="sourcePoint"/><mxPoint x="186.2500000000001" y="200" as="targetPoint"/><Array as="points"><mxPoint x="350" y="-130"/><mxPoint x="350" y="250"/><mxPoint x="186" y="250"/></Array><mxPoint as="offset"/></mxGeometry></mxCell><mxCell id="101" value="Get all&#xa;call expressions&#xa;and&#xa;variable uses" style="edgeStyle=orthogonalEdgeStyle;exitX=0;exitY=0.5;exitPerimeter=0;entryX=0.5;entryY=1;entryPerimeter=0" parent="1" source="22" target="17" edge="1"><mxGeometry x="-0.7942746239689447" width="100" height="100" relative="1" as="geometry"><mxPoint y="100" as="sourcePoint"/><mxPoint x="100" as="targetPoint"/><Array as="points"><mxPoint x="360" y="54"/><mxPoint x="360" y="54"/><mxPoint x="350" y="54"/><mxPoint x="350" y="250"/><mxPoint x="186" y="250"/></Array><mxPoint as="offset"/></mxGeometry></mxCell><mxCell id="102" value="Get private variables&#xa;Get local variables&#xa;Get constant variables&#xa;Does variable has address references" style="edgeStyle=orthogonalEdgeStyle;exitX=0;exitY=0.5;exitPerimeter=0;entryX=0.5;entryY=1;entryPerimeter=0;align=left" parent="1" source="19" target="17" edge="1"><mxGeometry x="0.31796610169491624" width="100" height="100" relative="1" as="geometry"><mxPoint y="100" as="sourcePoint"/><mxPoint x="100" as="targetPoint"/><mxPoint as="offset"/></mxGeometry></mxCell><mxCell id="103" value="Get kernel functions&#xa;Get helper functions&#xa;Get calls to helper functions&#xa;" style="edgeStyle=orthogonalEdgeStyle;exitX=0;exitY=0.5;exitPerimeter=0;entryX=0.5;entryY=1;entryPerimeter=0;align=left" parent="1" source="20" target="17" edge="1"><mxGeometry x="-0.40838753096597613" width="100" height="100" relative="1" as="geometry"><mxPoint y="100" as="sourcePoint"/><mxPoint x="100" as="targetPoint"/><mxPoint as="offset"/></mxGeometry></mxCell><mxCell id="104" value="Get pointer accesses" style="edgeStyle=orthogonalEdgeStyle;exitX=0;exitY=0.5;exitPerimeter=0;entryX=0.5;entryY=1;entryPerimeter=0;elbow=vertical" parent="1" source="21" target="17" edge="1"><mxGeometry x="-0.7743830787309045" y="-8.000000000000481" width="100" height="100" relative="1" as="geometry"><mxPoint y="100" as="sourcePoint"/><mxPoint x="100" as="targetPoint"/><mxPoint as="offset"/></mxGeometry></mxCell><mxCell id="105" value="" style="ellipse;whiteSpace=wrap" parent="1" vertex="1"><mxGeometry x="461.0000000000002" y="1130.0000000000002" width="10" height="10" as="geometry"/></mxCell><mxCell id="81" value="" style="edgeStyle=none;endArrow=none;dashed=1;dashPattern=1 4;entryX=0.25;entryY=1" parent="1" target="45" edge="1"><mxGeometry width="100" height="100" relative="1" as="geometry"><mxPoint x="630" y="-30" as="sourcePoint"/><mxPoint x="940" y="-60" as="targetPoint"/></mxGeometry></mxCell><mxCell id="111" value="Get all builtin calls" style="edgeStyle=orthogonalEdgeStyle;exitX=0.5;exitY=0;elbow=vertical" parent="1" source="105" target="17" edge="1"><mxGeometry x="-0.7260160924283056" y="-9.999999999999492" width="100" height="100" relative="1" as="geometry"><mxPoint y="100" as="sourcePoint"/><mxPoint x="100" as="targetPoint"/><Array as="points"><mxPoint x="466" y="1100"/><mxPoint x="186" y="1100"/></Array><mxPoint as="offset"/></mxGeometry></mxCell><mxCell id="112" value="" style="edgeStyle=none;endArrow=none;dashed=1;dashPattern=1 4;entryX=0;entryY=0.75" parent="1" target="47" edge="1"><mxGeometry width="100" height="100" relative="1" as="geometry"><mxPoint x="80" y="-280" as="sourcePoint"/><mxPoint x="440" y="-570" as="targetPoint"/></mxGeometry></mxCell><mxCell id="113" value="" style="edgeStyle=none;endArrow=none;dashed=1;dashPattern=1 4;entryX=0;entryY=0.75" parent="1" target="43" edge="1"><mxGeometry width="100" height="100" relative="1" as="geometry"><mxPoint x="290" y="-570" as="sourcePoint"/><mxPoint x="500" y="-600" as="targetPoint"/></mxGeometry></mxCell><mxCell id="114" value="" style="edgeStyle=none;endArrow=none;dashed=1;dashPattern=1 4;entryX=0;entryY=0.5" parent="1" target="42" edge="1"><mxGeometry width="100" height="100" relative="1" as="geometry"><mxPoint x="500" y="-910" as="sourcePoint"/><mxPoint x="700" y="-920" as="targetPoint"/></mxGeometry></mxCell><mxCell id="115" value="Program should be in runnable state and produce correct results even if algorithm is stopped in any place. (WebCLPrinter must be always ran before end)&#xa;&#xa;e.g. If WebCLBuiltinHandler, WebCLMemoryAccessHandler and WebCLKernelHandler are disabled, produced OpenCL program should still ran and produce correct results." style="shape=note;whiteSpace=wrap;align=center" parent="1" vertex="1"><mxGeometry x="1040" y="-1136.5" width="310" height="225.00000000000045" as="geometry"/></mxCell><mxCell id="117" value="" style="line" parent="1" vertex="1"><mxGeometry x="793.0000000000003" y="1920" width="160" height="10" as="geometry"/></mxCell><mxCell id="122" value="" style="group" parent="1" vertex="1" connectable="0"><mxGeometry x="34" y="-1132" width="265.0000000000002" height="285" as="geometry"/></mxCell><mxCell id="121" value="" style="whiteSpace=wrap" parent="122" vertex="1"><mxGeometry width="265.0000000000002" height="270" as="geometry"/></mxCell><UserObject label="Input source" link="https://rawgithub.com/KhronosGroup/webcl-validator/master/doc/figures/step_0_input_source.png" id="118"><mxCell style="icon;image=https://lh3.googleusercontent.com/-KBSiw8N_4HM/Upb3TkAi8EI/AAAAAAAAAAc/MS6YNRo1XpQ/s400/step_0_input_source.png;shape=image;strokeColor=#000000;strokeWidth=1;shadow=1" parent="122" vertex="1"><mxGeometry x="5" y="5" width="255" height="235" as="geometry"/></mxCell></UserObject><mxCell id="125" value="" style="group" parent="1" vertex="1" connectable="0"><mxGeometry x="770.0000000000002" y="-1136.5" width="230.00000000000023" height="248.00000000000023" as="geometry"/></mxCell><mxCell id="42" value="" style="whiteSpace=wrap;verticalAlign=bottom" parent="125" vertex="1"><mxGeometry width="230.00000000000023" height="248.00000000000023" as="geometry"/></mxCell><mxCell id="124" value="All user #defines are evaluated" style="icon;image=https://lh4.googleusercontent.com/-Zn4xXFLa4Os/Upb36B5JS1I/AAAAAAAAAA4/1G6SMF5Vu9Y/s400/step_1_preprocess_user_macros_hilite.png;shape=image" parent="125" vertex="1"><mxGeometry x="2.2737367544323206e-13" y="11.499999999999773" width="230" height="206.50000000000045" as="geometry"/></mxCell><mxCell id="127" value="" style="group" parent="1" vertex="1" connectable="0"><mxGeometry x="666.0000000000006" y="-877.5" width="249.9999999999999" height="305" as="geometry"/></mxCell><mxCell id="43" value="" style="whiteSpace=wrap" parent="127" vertex="1"><mxGeometry width="249.9999999999999" height="300" as="geometry"/></mxCell><mxCell id="126" value="No more unnamed nor anonymous&#xa;structure declarations." style="icon;image=https://lh3.googleusercontent.com/-09yZzsXJl_M/Upb4UnPG4QI/AAAAAAAAABE/DVr2MGVTiAM/s400/step_2_give_names_to_unnamed_structs_hilite.png;shape=image" parent="127" vertex="1"><mxGeometry x="3.9999999999998863" y="11" width="240" height="240" as="geometry"/></mxCell><mxCell id="129" value="" style="group" parent="1" vertex="1" connectable="0"><mxGeometry x="623.0000000000007" y="-561" width="240" height="311" as="geometry"/></mxCell><mxCell id="47" value="" style="whiteSpace=wrap" parent="129" vertex="1"><mxGeometry width="240" height="310" as="geometry"/></mxCell><mxCell id="128" value="All nested structure declarations are &#xa;removed." style="icon;image=https://lh3.googleusercontent.com/-Cfcl1sS3ZjI/Upb4y7-ZkoI/AAAAAAAAABY/J9x_zPAtVl0/s400/step_3_flatten_nested_struct_declarations_hilite.png;shape=image" parent="129" vertex="1"><mxGeometry x="9.499999999999773" y="6.0000000000009095" width="220.50000000000023" height="253.9999999999991" as="geometry"/></mxCell><mxCell id="131" value="" style="group" parent="1" vertex="1" connectable="0"><mxGeometry x="974.5000000000014" y="-591.9999999999991" width="240" height="350" as="geometry"/></mxCell><mxCell id="45" value="" style="whiteSpace=wrap" parent="131" vertex="1"><mxGeometry width="240" height="350" as="geometry"/></mxCell><mxCell id="130" value="Type declarations are moved to start of&#xa;module to make them available for&#xa;address space structure declarations." style="icon;image=https://lh3.googleusercontent.com/-MxJL8Bqo3pk/Upb5STTnx4I/AAAAAAAAABo/V36aBfuhzvc/s400/step_4_move_typedecls_to_start_of_module_hilite.png;shape=image" parent="131" vertex="1"><mxGeometry x="6.7499999999990905" y="10" width="223.2500000000009" height="270" as="geometry"/></mxCell><mxCell id="133" value="" style="group" parent="1" vertex="1" connectable="0"><mxGeometry x="1240" y="30" width="410" height="310" as="geometry"/></mxCell><mxCell id="46" value="" style="whiteSpace=wrap" parent="133" vertex="1"><mxGeometry y="-20" width="350" height="300" as="geometry"/></mxCell><mxCell id="132" value="Type declarations for address space structures&#xa;are added." style="icon;image=https://lh5.googleusercontent.com/-aKuN_1L2Uqs/Upb73HC2zJI/AAAAAAAAADE/anHm5Y1gbyM/s400/step_5_create_address_space_types_hilite_75ppi.png;shape=image" parent="133" vertex="1"><mxGeometry x="10" y="-1.9999999999998863" width="330" height="229.9999999999999" as="geometry"/></mxCell><mxCell id="136" value="" style="group;whiteSpace=wrap" parent="1" vertex="1" connectable="0"><mxGeometry x="1236.0000000000005" y="683.0000000000005" width="370" height="287.00000000000017" as="geometry"/></mxCell><mxCell id="139" value="" style="group" parent="136" vertex="1" connectable="0"><mxGeometry x="27.000000000000163" y="7.000000000000193" width="340" height="280" as="geometry"/></mxCell><mxCell id="137" value="" style="whiteSpace=wrap" parent="139" vertex="1"><mxGeometry x="-12.00000000000016" width="340" height="280" as="geometry"/></mxCell><mxCell id="138" value="Address space limit structure types and constant address &#xa;space null-pointer allocation. Also program allocation &#xa;argument was added to helper function declaration." style="icon;image=https://lh6.googleusercontent.com/-zPBaBN_k4tc/Upb8Yy7ch7I/AAAAAAAAADk/dqlv1zBUTjQ/s400/step_6_part2_limit_structs_and_helper_arg_hilite.png;shape=image" parent="139" vertex="1"><mxGeometry x="-2.9999999999997105" y="3.999999999999943" width="321.9999999999998" height="206.00000000000006" as="geometry"/></mxCell><mxCell id="140" value="" style="group" parent="1" vertex="1" connectable="0"><mxGeometry x="1483.0000000000005" y="420.9999999999998" width="367.00000000000017" height="437.00000000000017" as="geometry"/></mxCell><mxCell id="141" value="" style="group" parent="140" vertex="1" connectable="0"><mxGeometry x="27.000000000000163" y="7.000000000000193" width="340" height="430" as="geometry"/></mxCell><mxCell id="144" value="" style="group" parent="141" vertex="1" connectable="0"><mxGeometry x="-12.00000000000016" width="302.00000000000017" height="430" as="geometry"/></mxCell><mxCell id="142" value="" style="whiteSpace=wrap" parent="144" vertex="1"><mxGeometry y="-6" width="302.00000000000017" height="436" as="geometry"/></mxCell><mxCell id="143" value="Size arguments were added to kernel declaration. &#xa;Program limit structure, private and local address&#xa;spaces are allocated and initialized. Code &#xa;for finding suitable null pointer for each address space.&#xa;References to relocated variables are replaced with&#xa;references to address space struct fields. " style="icon;image=https://lh4.googleusercontent.com/-xN3MmPO-8sI/Upb8w0QKv9I/AAAAAAAAAD0/1KYf_Bgj7sc/s400/step_6_part3_kernel_init_and_reference_fixes_hilite.png;shape=image" parent="144" vertex="1"><mxGeometry x="9.00000000000045" y="-2.000000000000057" width="282.9999999999997" height="326.00000000000006" as="geometry"/></mxCell><mxCell id="151" value="" style="group" parent="1" vertex="1" connectable="0"><mxGeometry x="1340" y="1347" width="330" height="260" as="geometry"/></mxCell><mxCell id="152" value="" style="group" parent="151" vertex="1" connectable="0"><mxGeometry width="425" height="310" as="geometry"/></mxCell><mxCell id="155" value="" style="group" parent="152" vertex="1" connectable="0"><mxGeometry width="330" height="270" as="geometry"/></mxCell><mxCell id="164" value="" style="group" parent="155" vertex="1" connectable="0"><mxGeometry width="330" height="270" as="geometry"/></mxCell><mxCell id="153" value="" style="whiteSpace=wrap" parent="164" vertex="1"><mxGeometry width="330" height="270" as="geometry"/></mxCell><mxCell id="154" value="Another memory access was protected to be in &#xa;valid limits." style="icon;image=https://lh4.googleusercontent.com/-w3zDfrPXMhA/Upb-sUbo9jI/AAAAAAAAAE4/NY39EJRR1hQ/s400/step_7_part3_another_mem_protect_call_hilite.png;shape=image" parent="164" vertex="1"><mxGeometry x="5.999999999999773" y="8" width="314.0000000000002" height="212" as="geometry"/></mxCell><mxCell id="157" value="" style="group" parent="1" vertex="1" connectable="0"><mxGeometry x="469.9999999999999" y="1310.0000000000002" width="410.0000000000001" height="239.99999999999977" as="geometry"/></mxCell><mxCell id="75" value="" style="whiteSpace=wrap" parent="157" vertex="1"><mxGeometry width="410.0000000000001" height="239.99999999999977" as="geometry"/></mxCell><mxCell id="156" value="Safe builtin function implementations were added for each&#xa;unsafe builtin call." style="icon;image=https://lh5.googleusercontent.com/-ZB0nwCyO-0c/Upb_E_OjYSI/AAAAAAAAAFM/8hYGLXwPR7Q/s400/step_8_part1_generated_safe_builtin_implementation_hilite.png;shape=image" parent="157" vertex="1"><mxGeometry x="13.000000000000568" y="9.999999999999773" width="380" height="180" as="geometry"/></mxCell><mxCell id="158" value="" style="group" parent="1" vertex="1" connectable="0"><mxGeometry x="701.0000000000005" y="1283" width="430" height="214.99999999999955" as="geometry"/></mxCell><mxCell id="161" value="" style="group" parent="158" vertex="1" connectable="0"><mxGeometry x="-30" y="40" width="460" height="140" as="geometry"/></mxCell><mxCell id="159" value="" style="whiteSpace=wrap" parent="161" vertex="1"><mxGeometry x="59.56250000000068" y="7.999999999999545" width="380" height="160" as="geometry"/></mxCell><mxCell id="160" value="Original builtin call is replaced with safe version." style="icon;image=https://lh3.googleusercontent.com/-qaBlZBL6RTk/Upb_TrSyc6I/AAAAAAAAAFY/nG4Uc_kiW5E/s400/step_8_part2_called_safe_builtin_version_hilite.png;shape=image" parent="161" vertex="1"><mxGeometry x="71.06250000000102" y="17.499999999999773" width="356.99999999999943" height="110.00000000000023" as="geometry"/></mxCell><mxCell id="150" value="" style="group" parent="1" vertex="1" connectable="0"><mxGeometry x="1276.5000000000005" y="1134.4999999999993" width="425" height="320" as="geometry"/></mxCell><mxCell id="147" value="" style="group" parent="150" vertex="1" connectable="0"><mxGeometry width="425" height="320" as="geometry"/></mxCell><mxCell id="148" value="" style="whiteSpace=wrap" parent="147" vertex="1"><mxGeometry width="420" height="320" as="geometry"/></mxCell><mxCell id="149" value="Address clamping macros are added to module start and &#xa;memory accesses are protected." style="icon;image=https://lh5.googleusercontent.com/-_2n8quN4h18/Upb-OHMeisI/AAAAAAAAAEo/K1-C4gidJG8/s400/step_7_part2_address_clamp_macro_and_protection_hilite.png;shape=image" parent="147" vertex="1"><mxGeometry x="5.999999999999773" y="8" width="404.0000000000002" height="264" as="geometry"/></mxCell><mxCell id="146" value="" style="group" parent="1" vertex="1" connectable="0"><mxGeometry x="1245" y="990.0000000000002" width="415" height="190" as="geometry"/></mxCell><mxCell id="74" value="" style="whiteSpace=wrap" parent="146" vertex="1"><mxGeometry width="415" height="190" as="geometry"/></mxCell><mxCell id="145" value="Information about required address space minimum size and&#xa;alignment were added." style="icon;image=https://lh4.googleusercontent.com/-ytu-rHiAv34/Upb-FIrlZ9I/AAAAAAAAAEc/M7RNKtWPTMQ/s400/step_7_part1_access_size_defines_hilite.png;shape=image" parent="146" vertex="1"><mxGeometry x="11.999999999999773" y="11" width="400" height="134" as="geometry"/></mxCell><mxCell id="135" value="" style="group" parent="1" vertex="1" connectable="0"><mxGeometry x="1244.9999999999998" y="382.99999999999955" width="260.0000000000002" height="340" as="geometry"/></mxCell><mxCell id="48" value="" style="whiteSpace=wrap" parent="135" vertex="1"><mxGeometry width="260.0000000000002" height="340" as="geometry"/></mxCell><mxCell id="134" value="Kernel argument info is added to start &#xa;comment." style="icon;image=https://lh6.googleusercontent.com/-oF3xTgQHluA/Upb8FHkzXBI/AAAAAAAAADQ/ZOBLNRYVc9E/s400/step_6_part1_json.png;shape=image" parent="135" vertex="1"><mxGeometry x="8.000000000000227" y="6.999999999999943" width="240" height="280.0000000000003" as="geometry"/></mxCell><mxCell id="166" value="" style="group" parent="1" vertex="1" connectable="0"><mxGeometry x="65.00000000000037" y="1340" width="306.99999999999966" height="420" as="geometry"/></mxCell><mxCell id="49" value="" style="whiteSpace=wrap" parent="166" vertex="1"><mxGeometry width="306.99999999999966" height="420" as="geometry"/></mxCell><mxCell id="165" value="Before end piece of macros and code that&#xa;is not dependent on input source is added." style="icon;image=https://lh6.googleusercontent.com/-umy0WfmDrXA/UpcAOfzhjhI/AAAAAAAAAF4/0QdGNP8VRUg/s400/step_9_part1_general_purpose_macros_hilite.png;shape=image" parent="166" vertex="1"><mxGeometry x="8.49999999999963" y="9" width="290" height="360" as="geometry"/></mxCell></root></mxGraphModel>